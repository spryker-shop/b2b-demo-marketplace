{% extends view('detail', '@SprykerFeature:SspInquiryManagement') %}

{% block sspInquiryCancelAction %}
    {% if data.sspInquiry.isCancellable and data.isSspInquiryOwner %}
        {{ form_start(data.cancelForm, {'action': path('customer/ssp-inquiry/cancel', {
                'sspInquiryReference': data.sspInquiry.reference
        })}) }}
            <button class="button button--alert button--hollow" data-qa="cancel-ssp-inquiry">{{ 'ssp_inquiry.cancel' | trans }}</button>
        {{ form_end(data.cancelForm) }}
    {% endif %}
{% endblock %}

{% block customerContent %}
    {% if can('CreateSspInquiryPermissionPlugin') %}
        {% include molecule('action-bar') with {
            modifiers: ['first'],
            data: {
                title: 'customer.account.ssp_inquiry.details' | trans,
                actions: [
                    {
                        block: block('actions',)
                    },
                ],
            },
        } only %}
    {% endif %}

    {% block information %}
        {{ parent() }}
    {% endblock %}
{% endblock %}

{% block table %}
    {% set rows = rows | map(row => row | merge({
        actions: row.actions | map(action => action | merge({
            iconModifier: 'big',
            icon: 'download',
            title: action.label,
        })),
    })) %}

    {% include molecule('advanced-table', 'FeatureUi') with {
        data: {
            columns: columns,
            rows: rows,
        },
    } only %}
{% endblock %}

{% block actions %}
    {% if data.inquiry.isCancellable and data.isInquiryOwner %}
        {{ form_start(data.cancelForm, {'action': path('customer/ssp-inquiry/cancel', {
            'sspInquiryReference': data.inquiry.reference
        })}) }}
            <button class="button button--alert button--hollow" data-qa="cancel-ssp-inquiry">{{ 'ssp_inquiry.cancel' | trans }}</button>
        {{ form_end(data.cancelForm) }}
    {% endif %}
{% endblock %}

{% block status %}
    <li>
        <span class="text-color-auxiliary">{{ 'customer.ssp_inquiry.details.status' | trans  ~ ': ' }}</span>

        {% include molecule('status') with {
            data: {
                label: ('ssp_inquiry.status.' ~ data.inquiry.status) | trans ,
                status: data.inquiry.status,
            },
        } only %}
    </li>
{% endblock %}
